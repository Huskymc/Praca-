<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>SPR - Panel ZarzÄ…dzania SieciÄ…</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        :root { --main-blue: #0052cc; --light-bg: #f4f7fa; --border: #e1e4e8; }
        body { background: var(--light-bg); font-family: 'Inter', sans-serif; overflow: hidden; }
        
        /* Layout */
        .top-bar { height: 65px; background: white; border-bottom: 1px solid var(--border); display: flex; align-items: center; padding: 0 25px; justify-content: space-between; position: fixed; width: 100%; z-index: 1000; }
        .wrapper { display: flex; height: 100vh; padding-top: 65px; }
        .sidebar { width: 280px; background: white; border-right: 1px solid var(--border); padding: 25px; }
        .main-content { flex-grow: 1; padding: 40px; overflow-y: auto; }

        /* UI Elements */
        .card-spr { background: white; border: 1px solid var(--border); border-radius: 12px; padding: 25px; margin-bottom: 25px; box-shadow: 0 2px 4px rgba(0,0,0,0.02); }
        .status-pill { padding: 6px 16px; border-radius: 20px; font-weight: 600; font-size: 0.85rem; }
        .status-offline { background: #f1f3f4; color: #5f6368; }
        .status-online { background: #e6f4ea; color: #1e8e3e; }
        .status-break { background: #fef7e0; color: #b06000; }

        /* Timer Button */
        .work-controls { position: fixed; bottom: 40px; right: 40px; }
        .btn-work { width: 220px; height: 65px; border-radius: 35px; font-weight: 800; text-transform: uppercase; letter-spacing: 1px; transition: all 0.3s; }
        
        #login-screen { position: fixed; inset: 0; background: var(--light-bg); display: flex; align-items: center; justify-content: center; z-index: 10000; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="login-screen">
    <div class="card shadow-lg border-0 p-5" style="width: 420px; border-radius: 20px;">
        <div class="text-center mb-4">
            <h2 class="fw-bold text-primary">DorszHub SPR</h2>
            <p class="text-muted">System Pracy i RozliczeÅ„</p>
        </div>
        <input type="text" id="l-user" class="form-control mb-3 py-2" placeholder="UÅ¼ytkownik (Dorsz / Pracownik)">
        <input type="password" id="l-pass" class="form-control mb-4 py-2" placeholder="HasÅ‚o">
        <button onclick="login()" class="btn btn-primary w-100 py-3 fw-bold shadow-sm">ZALOGUJ SIÄ˜</button>
    </div>
</div>

<div class="top-bar">
    <div class="d-flex align-items-center gap-3">
        <span class="badge bg-primary px-3 py-2">SPR v2.0</span>
        <div id="global-status" class="status-pill status-offline">STATUS: OFFLINE</div>
    </div>
    <div class="d-flex align-items-center gap-3">
        <span class="fw-bold" id="user-tag">UÅ¼ytkownik</span>
        <button onclick="location.reload()" class="btn btn-sm btn-light border"><i class="bi bi-box-arrow-right"></i></button>
    </div>
</div>

<div class="wrapper">
    <div class="sidebar">
        <h6 class="text-muted small fw-bold mb-4">NAWIGACJA</h6>
        <div class="list-group list-group-flush">
            <a href="#" class="nav-link mb-2 active"><i class="bi bi-grid-1x2-fill me-2"></i> Pulpit</a>
            <a href="#" class="nav-link mb-2"><i class="bi bi-calendar-check me-2"></i> Grafik pracy</a>
            <a href="#" class="nav-link mb-2"><i class="bi bi-briefcase me-2"></i> Moi pracownicy</a>
            <a href="#" class="nav-link mb-2"><i class="bi bi-clock-history me-2"></i> Raporty</a>
        </div>
    </div>

    <div class="main-content">
        <div id="view-owner" class="hidden">
            <h3 class="fw-bold mb-4">Panel ZarzÄ…dzania SieciÄ…</h3>
            <div class="row">
                <div class="col-md-7">
                    <div class="card-spr">
                        <h6 class="fw-bold mb-3">Otrzymane wnioski o urlop</h6>
                        <div id="admin-requests-list" class="small text-muted">Brak nowych wnioskÃ³w...</div>
                    </div>
                </div>
                <div class="col-md-5">
                    <div class="card-spr">
                        <h6 class="fw-bold mb-3">Ustaw grafik (DziÅ›)</h6>
                        <select id="emp-select" class="form-select mb-2"><option>Jan Kowalski</option></select>
                        <div class="input-group mb-2">
                            <span class="input-group-text">Od</span><input type="time" id="g-start" class="form-control" value="08:00">
                            <span class="input-group-text">Do</span><input type="time" id="g-end" class="form-control" value="16:00">
                        </div>
                        <button class="btn btn-primary btn-sm w-100" onclick="saveGrafik()">Zapisz w grafiku</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="view-worker" class="hidden">
            <h3 class="fw-bold mb-4">CzeÅ›Ä‡, Twoja praca na dziÅ›</h3>
            <div class="row">
                <div class="col-md-6">
                    <div class="card-spr text-center py-5">
                        <h1 id="clock-display" class="fw-bold display-4">00:00:00</h1>
                        <p class="text-muted">TwÃ³j czas pracy w dniu dzisiejszym</p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card-spr">
                        <h6 class="fw-bold">ZÅ‚Ã³Å¼ wniosek o urlop</h6>
                        <hr>
                        <input type="date" id="urlop-date" class="form-control mb-2">
                        <select id="urlop-type" class="form-select mb-2">
                            <option>Urlop wypoczynkowy</option>
                            <option>Urlop na Å¼Ä…danie</option>
                            <option>L4 / Chorobowe</option>
                        </select>
                        <button class="btn btn-outline-primary w-100" onclick="sendRequest()">WyÅ›lij do wÅ‚aÅ›ciciela</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="worker-actions" class="work-controls hidden">
    <div class="btn-group dropup shadow-lg">
        <button id="main-btn" onclick="toggleWork()" class="btn btn-success btn-work">ZACZNIJ PRACÄ˜</button>
        <button type="button" class="btn btn-success dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown"></button>
        <ul class="dropdown-menu p-2 shadow" style="min-width: 220px; border-radius: 15px;">
            <li><h6 class="dropdown-header">ZarzÄ…dzanie czasem</h6></li>
            <li><a class="dropdown-item rounded" href="#" onclick="setBreak('PRZERWA LUNCH')">ðŸ¥ª Lunch (30 min)</a></li>
            <li><a class="dropdown-item rounded" href="#" onclick="setBreak('PRZERWA KRÃ“TKA')">â˜• Przerwa krÃ³tka</a></li>
            <li><a class="dropdown-item rounded" href="#" onclick="setBreak('SPOTKANIE')">ðŸ‘¥ Spotkanie / Narada</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item text-danger fw-bold" href="#" onclick="toggleWork()">ðŸ›‘ ZAKOÅƒCZ PRACÄ˜</a></li>
        </ul>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    let timerInterval;
    let seconds = 0;
    let isWorking = false;

    // LOGIN LOGIC
    function login() {
        const u = document.getElementById('l-user').value;
        const p = document.getElementById('l-pass').value;

        if(u === 'Dorsz' && p === '123') {
            showPanel('owner', 'Wojciech (WÅ‚aÅ›ciciel)');
        } else if(u === 'Pracownik' && p === '123') {
            showPanel('worker', 'Jan Kowalski');
        } else { alert("BÅ‚Ä…d!"); }
    }

    function showPanel(role, name) {
        document.getElementById('login-screen').classList.add('hidden');
        document.getElementById('user-tag').innerText = name;
        if(role === 'owner') {
            document.getElementById('view-owner').classList.remove('hidden');
            renderAdminRequests();
        } else {
            document.getElementById('view-worker').classList.remove('hidden');
            document.getElementById('worker-actions').classList.remove('hidden');
        }
    }

    // WORK TIMER & STATUS
    function toggleWork() {
        const btn = document.getElementById('main-btn');
        const status = document.getElementById('global-status');
        
        if(!isWorking) {
            isWorking = true;
            btn.innerText = "W PRACY...";
            btn.className = "btn btn-danger btn-work";
            status.innerText = "STATUS: W PRACY";
            status.className = "status-pill status-online";
            timerInterval = setInterval(() => {
                seconds++;
                updateClock();
            }, 1000);
        } else {
            isWorking = false;
            clearInterval(timerInterval);
            btn.innerText = "ZACZNIJ PRACÄ˜";
            btn.className = "btn btn-success btn-work";
            status.innerText = "STATUS: OFFLINE";
            status.className = "status-pill status-offline";
        }
    }

    function setBreak(type) {
        if(!isWorking) return alert("Najpierw wejdÅº do pracy!");
        document.getElementById('global-status').innerText = "STATUS: " + type;
        document.getElementById('global-status').className = "status-pill status-break";
    }

    function updateClock() {
        const h = Math.floor(seconds / 3600).toString().padStart(2,'0');
        const m = Math.floor((seconds % 3600) / 60).toString().padStart(2,'0');
        const s = (seconds % 60).toString().padStart(2,'0');
        document.getElementById('clock-display').innerText = `${h}:${m}:${s}`;
    }

    // PERSISTENT DATA (LocalStorage)
    function sendRequest() {
        const date = document.getElementById('urlop-date').value;
        const type = document.getElementById('urlop-type').value;
        if(!date) return alert("Wybierz datÄ™!");

        const requests = JSON.parse(localStorage.getItem('urlopy') || '[]');
        requests.push({ user: 'Jan Kowalski', date: date, type: type });
        localStorage.setItem('urlopy', JSON.stringify(requests));
        alert("Wniosek wysÅ‚any!");
    }

    function renderAdminRequests() {
        const list = document.getElementById('admin-requests-list');
        const requests = JSON.parse(localStorage.getItem('urlopy') || '[]');
        if(requests.length === 0) return;

        list.innerHTML = requests.map(r => `
            <div class="d-flex justify-content-between align-items-center border-bottom py-2">
                <span><b>${r.user}</b>: ${r.type} (${r.date})</span>
                <div>
                    <button class="btn btn-sm btn-success py-0">Akceptuj</button>
                    <button class="btn btn-sm btn-danger py-0">OdrzuÄ‡</button>
                </div>
            </div>
        `).join('');
    }

    function saveGrafik() {
        alert("Grafik zostaÅ‚ zaktualizowany i rozesÅ‚any do pracownikÃ³w!");
    }
</script>
</body>
</html>
