<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>SPR PRO - System ZarzƒÖdzania</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        :root { --main-blue: #0052cc; --light-bg: #f4f7fa; --border: #e1e4e8; }
        body { background: var(--light-bg); font-family: 'Inter', sans-serif; overflow: hidden; }
        
        .top-bar { height: 65px; background: white; border-bottom: 1px solid var(--border); display: flex; align-items: center; padding: 0 25px; justify-content: space-between; position: fixed; width: 100%; z-index: 1000; }
        .wrapper { display: flex; height: 100vh; padding-top: 65px; }
        .sidebar { width: 280px; background: white; border-right: 1px solid var(--border); padding: 25px; }
        .main-content { flex-grow: 1; padding: 40px; overflow-y: auto; }

        .card-spr { background: white; border: 1px solid var(--border); border-radius: 12px; padding: 25px; margin-bottom: 25px; box-shadow: 0 2px 4px rgba(0,0,0,0.02); }
        .status-pill { padding: 6px 16px; border-radius: 20px; font-weight: 600; font-size: 0.85rem; }
        .status-offline { background: #f1f3f4; color: #5f6368; }
        .status-online { background: #e6f4ea; color: #1e8e3e; }
        .status-break { background: #fef7e0; color: #b06000; }

        .work-controls { position: fixed; bottom: 40px; right: 40px; }
        .btn-work { width: 220px; height: 65px; border-radius: 35px; font-weight: 800; text-transform: uppercase; }
        
        #login-screen { position: fixed; inset: 0; background: var(--light-bg); display: flex; align-items: center; justify-content: center; z-index: 10000; }
        .hidden { display: none !important; }
        .money-text { color: #1e8e3e; font-weight: bold; }
    </style>
</head>
<body>

<div id="login-screen">
    <div class="card shadow-lg border-0 p-5" style="width: 420px; border-radius: 20px;">
        <div class="text-center mb-4">
            <h2 class="fw-bold text-primary">DorszHub SPR</h2>
            <p class="text-muted">Szef: Dorsz | Pracownik: Jan (has≈Ço: 123)</p>
        </div>
        <input type="text" id="l-user" class="form-control mb-3" placeholder="U≈ºytkownik">
        <input type="password" id="l-pass" class="form-control mb-4" placeholder="Has≈Ço">
        <button onclick="login()" class="btn btn-primary w-100 py-3 fw-bold">ZALOGUJ SIƒò</button>
    </div>
</div>

<div class="top-bar">
    <div class="d-flex align-items-center gap-3">
        <span class="badge bg-primary px-3">SPR 2026</span>
        <div id="global-status" class="status-pill status-offline">STATUS: OFFLINE</div>
    </div>
    <div class="d-flex align-items-center gap-3">
        <span class="fw-bold" id="user-tag">U≈ºytkownik</span>
        <button onclick="location.reload()" class="btn btn-sm btn-light border"><i class="bi bi-power"></i></button>
    </div>
</div>

<div class="wrapper">
    <div class="sidebar">
        <div class="list-group list-group-flush">
            <a href="#" class="nav-link mb-2 active text-primary fw-bold"><i class="bi bi-house-door me-2"></i> Pulpit</a>
            <a href="#" class="nav-link mb-2 text-muted"><i class="bi bi-calendar-event me-2"></i> Grafik</a>
            <a href="#" class="nav-link mb-2 text-muted"><i class="bi bi-wallet2 me-2"></i> Finanse</a>
        </div>
    </div>

    <div class="main-content">
        <div id="view-owner" class="hidden">
            <h3 class="fw-bold mb-4">Centrum Dowodzenia W≈Ça≈õciciela</h3>
            <div class="row">
                <div class="col-md-8">
                    <div class="card-spr">
                        <h6 class="fw-bold mb-4">Aktywne Wnioski o Urlop</h6>
                        <div id="admin-requests-list">
                            <p class="text-muted small">Brak oczekujƒÖcych wniosk√≥w.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card-spr">
                        <h6 class="fw-bold mb-3">Ustaw Grafik</h6>
                        <label class="small text-muted">Pracownik:</label>
                        <select class="form-select mb-2"><option>Jan Kowalski</option></select>
                        <label class="small text-muted">Stawka godzinowa (PLN):</label>
                        <input type="number" id="hourly-rate" class="form-control mb-3" value="30">
                        <button class="btn btn-primary w-100" onclick="updateSettings()">Zastosuj zmiany</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="view-worker" class="hidden">
            <h3 class="fw-bold mb-4">Panel Pracownika</h3>
            <div class="row">
                <div class="col-md-4 text-center">
                    <div class="card-spr">
                        <h1 id="clock-display" class="fw-bold">00:00:00</h1>
                        <p class="text-muted small">Czas dzisiejszej zmiany</p>
                    </div>
                </div>
                <div class="col-md-4 text-center">
                    <div class="card-spr">
                        <h1 id="money-display" class="money-text">0.00 PLN</h1>
                        <p class="text-muted small">Tw√≥j dzisiejszy zarobek</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card-spr">
                        <h6 class="fw-bold mb-3">Z≈Ç√≥≈º wniosek</h6>
                        <input type="date" id="req-date" class="form-control mb-2">
                        <button class="btn btn-outline-primary btn-sm w-100" onclick="addRequest()">Wy≈õlij o urlop</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="worker-actions" class="work-controls hidden">
    <div class="btn-group dropup shadow-lg">
        <button id="main-btn" onclick="toggleWork()" class="btn btn-success btn-work">ZACZNIJ PRACƒò</button>
        <button type="button" class="btn btn-success dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown"></button>
        <ul class="dropdown-menu p-2 shadow">
            <li><a class="dropdown-item rounded" href="#" onclick="setBreak('PRZERWA')">‚òï Przerwa</a></li>
            <li><a class="dropdown-item rounded" href="#" onclick="setBreak('SPOTKANIE')">üë• Spotkanie</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item text-danger fw-bold" href="#" onclick="toggleWork()">üõë KONIEC PRACY</a></li>
        </ul>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    let seconds = 0;
    let timer;
    let isWorking = false;
    let hourlyRate = 30;

    function login() {
        const u = document.getElementById('l-user').value;
        if(u === 'Dorsz') showPanel('owner', 'W≈Ça≈õciciel');
        else if(u === 'Jan') showPanel('worker', 'Pracownik');
        else alert("Z≈Çy u≈ºytkownik!");
    }

    function showPanel(role, name) {
        document.getElementById('login-screen').classList.add('hidden');
        document.getElementById('user-tag').innerText = name;
        if(role === 'owner') {
            document.getElementById('view-owner').classList.remove('hidden');
            renderAdmin();
        } else {
            document.getElementById('view-worker').classList.remove('hidden');
            document.getElementById('worker-actions').classList.remove('hidden');
        }
    }

    function toggleWork() {
        const btn = document.getElementById('main-btn');
        const status = document.getElementById('global-status');
        if(!isWorking) {
            isWorking = true;
            btn.innerText = "PRACUJESZ...";
            btn.className = "btn btn-danger btn-work";
            status.innerText = "STATUS: W PRACY";
            status.className = "status-pill status-online";
            timer = setInterval(() => {
                seconds++;
                updateUI();
            }, 1000);
        } else {
            isWorking = false;
            clearInterval(timer);
            btn.innerText = "ZACZNIJ PRACƒò";
            btn.className = "btn btn-success btn-work";
            status.innerText = "STATUS: OFFLINE";
            status.className = "status-pill status-offline";
        }
    }

    function updateUI() {
        const h = Math.floor(seconds / 3600).toString().padStart(2,'0');
        const m = Math.floor((seconds % 3600) / 60).toString().padStart(2,'0');
        const s = (seconds % 60).toString().padStart(2,'0');
        document.getElementById('clock-display').innerText = `${h}:${m}:${s}`;
        
        // Zarobek: (sekundy / 3600) * stawka
        const earn = (seconds / 3600) * hourlyRate;
        document.getElementById('money-display').innerText = earn.toFixed(2) + " PLN";
    }

    function setBreak(type) {
        if(!isWorking) return alert("Musisz byƒá w pracy!");
        document.getElementById('global-status').innerText = "STATUS: " + type;
        document.getElementById('global-status').className = "status-pill status-break";
    }

    // PRZYCISKI W≈ÅA≈öCICIELA
    function updateSettings() {
        hourlyRate = document.getElementById('hourly-rate').value;
        alert("Zmieniono stawkƒô godzinowƒÖ na: " + hourlyRate + " PLN");
    }

    function addRequest() {
        const d = document.getElementById('req-date').value;
        if(!d) return alert("Wybierz datƒô!");
        let reqs = JSON.parse(localStorage.getItem('reqs') || '[]');
        reqs.push({id: Date.now(), date: d, user: 'Jan Kowalski'});
        localStorage.setItem('reqs', JSON.stringify(reqs));
        alert("Wys≈Çano wniosek!");
    }

    function renderAdmin() {
        const container = document.getElementById('admin-requests-list');
        let reqs = JSON.parse(localStorage.getItem('reqs') || '[]');
        if(reqs.length === 0) {
            container.innerHTML = '<p class="text-muted small">Brak oczekujƒÖcych wniosk√≥w.</p>';
            return;
        }
        container.innerHTML = reqs.map(r => `
            <div class="d-flex justify-content-between border-bottom py-3 align-items-center">
                <span><i class="bi bi-person"></i> <b>${r.user}</b> - Urlop: ${r.date}</span>
                <div class="btn-group">
                    <button class="btn btn-sm btn-success" onclick="actionReq(${r.id}, 'Zaakceptowano')">‚úî</button>
                    <button class="btn btn-sm btn-danger" onclick="actionReq(${r.id}, 'Odrzucono')">‚úñ</button>
                </div>
            </div>
        `).join('');
    }

    function actionReq(id, msg) {
        let reqs = JSON.parse(localStorage.getItem('reqs') || '[]');
        reqs = reqs.filter(r => r.id !== id);
        localStorage.setItem('reqs', JSON.stringify(reqs));
        alert(msg);
        renderAdmin();
    }
</script>
</body>
</html>
